(this.webpackJsonpforest=this.webpackJsonpforest||[]).push([[0],{118:function(e,t,i){},119:function(e,t,i){},120:function(e,t,i){},264:function(e,t,i){"use strict";i.r(t);var a=i(6),n=i.n(a),s=i(107),r=i.n(s),o=(i(118),i(37)),h=(i(119),i(120),i(27)),c=i(1),d=i(2),l=i(0),u=i(108),p=i(113),m=i(109),b=i.p+"static/media/BambooWithBones.78755282.fbx",f=i.p+"static/media/diffuse.4c274908.jpg",w=i.p+"static/media/specular.c52433c2.jpg",v=i.p+"static/media/normal.69df512f.jpg",g=i.p+"static/media/alpha.d3f17e68.jpg",y=function(){function e(t,i,a,n){Object(c.a)(this,e),this.material=new l.E({map:t.load(f),specularMap:t.load(w),normalMap:t.load(v),alphaMap:t.load(g),alphaTest:.8,side:l.l,opacity:0,transparent:!0}),this.treeCount=i,this.xPositionRange=a/2,this.zPositionRange=n/2,this.trees=[],this.animatedTrees=[],this.isFadingIn=!1}return Object(d.a)(e,[{key:"load",value:function(e){var t=this;(new p.a).load(b,(function(i){i.traverse((function(e){e instanceof l.T&&(e.material=t.material)}));for(var a=0;a<t.treeCount;a++){var n=m.a.clone(i);n.position.x=l.y.randFloat(-t.xPositionRange,t.xPositionRange),n.position.z=l.y.randFloat(-t.zPositionRange,t.zPositionRange),n.rotation.y=Math.PI*l.y.randFloat(0,1);var s=l.y.randFloat(.5,1.25);n.scale.x=s,n.scale.y=s,n.scale.z=s,e.add(n),t.trees.push(n)}}))}},{key:"makeVisible",value:function(){this.material.opacity=1,this.isFadingIn=!1}},{key:"fadeIn",value:function(){this.material.opacity<.8?(this.isFadingIn=!0,this.material.opacity=.8):this.material.opacity<1?this.material.opacity+=.001:this.material.opacity>1&&(this.isFadingIn=!1,this.material.opacity=1)}},{key:"animateTree",value:function(e){var t,i=Object(h.a)(e.skeleton.bones);try{for(i.s();!(t=i.n()).done;){t.value.rotation.x+=Math.PI/256}}catch(a){i.e(a)}finally{i.f()}}},{key:"getTrees",value:function(){return this.trees}}]),e}(),j=i.p+"static/media/grass.3be89642.jpg",x=function(){function e(t,i,a){Object(c.a)(this,e);var n=t.load(j);n.wrapS=l.P,n.wrapT=l.P,n.repeat.set(4,4),this.material=new l.C({map:n,side:l.l,opacity:0,transparent:!0}),this.width=i,this.height=a}return Object(d.a)(e,[{key:"load",value:function(e){var t=new l.J(this.width,this.height),i=new l.B(t,this.material);i.rotation.x=Math.PI/2,e.add(i)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.005:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),O=i.p+"static/media/wood.b467f5fc.jpg",k=function(){function e(t,i,a){Object(c.a)(this,e);var n=t.load(O);n.wrapS=l.P,n.wrapT=l.P,n.repeat.set(7,1),this.material=new l.C({map:n,side:l.l,opacity:0,transparent:!0}),this.width=i,this.height=a,this.relativeXPos=i/2+2.5,this.relativeZPos=a/2+2.5}return Object(d.a)(e,[{key:"load",value:function(e){var t=new l.B(new l.e(this.width,20,5),this.material);t.position.z=-this.relativeZPos,t.position.y=10,e.add(t);var i=t.clone();i.position.z=this.relativeZPos,i.position.y=10,e.add(i);var a=new l.B(new l.e(this.height+10,20,5),this.material);a.rotation.y=Math.PI/2,a.position.x=this.relativeXPos,a.position.z=0,a.position.y=10,e.add(a);var n=a.clone();n.position.x=-this.relativeXPos,e.add(n)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.005:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),I=function(){function e(t,i){Object(c.a)(this,e),this.camera=new l.I(45,window.innerWidth/window.innerHeight,.1,1e5),this.camera.position.set(0,250,500),this.renderer=new l.eb({canvas:t,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor("rgb(40, 44, 52)"),this.controls=new u.a(this.camera,this.renderer.domElement),this.controls.target=new l.bb(0,110,0),this.controls.update(),this.scene=new l.Q,this.raycaster=new l.O,this.mouse=new l.ab,this.textureLoader=new l.Y,this.bamboo=new y(this.textureLoader,i.trees,i.width,i.height),this.grass=new x(this.textureLoader,i.width,i.height),this.sideboard=new k(this.textureLoader,i.width,i.height),this.render()}return Object(d.a)(e,[{key:"render",value:function(){this.animationFrameId=null;var e=this;!function t(){e.animationFrameId=requestAnimationFrame(t),e.fadeIn(),e.renderer.render(e.scene,e.camera)}()}},{key:"setup",value:function(){var e="white";this.scene.fog=new l.r(e,1,900),this.scene.background=new l.i(e),this.scene.add(new l.a(3355443,15)),this.bamboo.load(this.scene),this.bamboo.makeVisible(),this.grass.load(this.scene),this.grass.makeVisible(),this.sideboard.load(this.scene),this.sideboard.makeVisible()}},{key:"update",value:function(e){this.clearScene(),this.scene.add(new l.a(3355443,15)),this.bamboo=new y(this.textureLoader,e.trees,e.width,e.height),this.grass=new x(this.textureLoader,e.width,e.height),this.sideboard=new k(this.textureLoader,e.width,e.height),this.bamboo.load(this.scene),this.bamboo.makeVisible(),this.grass.load(this.scene),this.grass.makeVisible(),this.sideboard.load(this.scene),this.sideboard.makeVisible()}},{key:"clearScene",value:function(){var e=[];this.scene.traverse((function(t){e.push(t)}));for(var t=0,i=e;t<i.length;t++){var a=i[t];this.scene.remove(a)}}},{key:"fadeIn",value:function(){this.bamboo.fadeIn(),this.grass.fadeIn(),this.sideboard.fadeIn()}},{key:"onMouseMove",value:function(e,t){this.mouse.x=parseFloat(e),this.mouse.y=parseFloat(t),this.raycaster.setFromCamera(this.mouse,this.camera);var i,a=this.raycaster.intersectObjects(this.bamboo.getTrees(),!0),n=Object(h.a)(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;this.bamboo.animateTree(s.object)}}catch(r){n.e(r)}finally{n.f()}}}]),e}(),P=i(11);var F=function(e){var t=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){i.current=new I(t.current,e.data),i.current.setup(),t.current.onmousemove=function(e){if(!i.current.bamboo.isFadingIn){var t=e.clientX/window.innerWidth*2-1,a=-e.clientY/window.innerHeight*2+1;i.current.onMouseMove(t,a)}}}),[]),Object(a.useEffect)((function(){e.updateCount>0&&i.current.update(e.data)}),[e.updateCount]),Object(P.jsx)("div",{children:Object(P.jsx)("canvas",{ref:t,width:window.innerWidth,height:window.innerHeight,className:"canvas",children:Object(P.jsx)("p",{children:"Your browser doesn't support canvas."})})})},C=i(28);i(263);var M=function(){var e=Object(a.useState)({width:100,height:100,trees:100}),t=Object(o.a)(e,2),i=t[0],n=t[1],s=Object(a.useState)(0),r=Object(o.a)(s,2),h=r[0],c=r[1];return Object(P.jsxs)("div",{className:"App",children:[Object(P.jsxs)(C.c,{data:i,onUpdate:function(e){n({width:e.width,height:e.height,trees:e.trees})},children:[Object(P.jsx)(C.b,{path:"width",label:"Width",min:10,max:800,step:1}),Object(P.jsx)(C.b,{path:"height",label:"Height",min:10,max:800,step:1}),Object(P.jsx)(C.b,{path:"trees",label:"Trees",min:1,max:500,step:1}),Object(P.jsx)(C.a,{label:"Update",onClick:function(){c(h+1)}})]}),Object(P.jsx)(F,{data:i,updateCount:h})]})},T=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,265)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;i(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(M,{})}),document.getElementById("root")),T()}},[[264,1,2]]]);
//# sourceMappingURL=main.6231dbe9.chunk.js.map