(this.webpackJsonpforest=this.webpackJsonpforest||[]).push([[0],{24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var i=a(10),s=a(8),n=a.n(s),r=a(16),o=a.n(r),c=(a(24),a(11)),l=(a(25),a(26),a(13)),h=a(0),d=a(2),u=a(1),b=a(19),j=a(18),m=function(){function e(t,a,i,s){Object(h.a)(this,e);this.material=new u.A({map:t.load("./textures/bamboo/diffuse.jpg"),alphaMap:t.load("./textures/bamboo/alpha.jpg"),alphaTest:.5,side:u.l,opacity:0,transparent:!0}),this.treeCount=a,this.xPositionRange=i/2,this.zPositionRange=s/2,this.swayAngle=0,this.trees=[],this.animatedTrees=[],this.isFadingIn=!1}return Object(d.a)(e,[{key:"load",value:function(e){var t=this;(new b.a).load("./models/bamboo/BambooWithBones.fbx",(function(a){a.traverse((function(e){e instanceof u.R&&(e.material=t.material)}));for(var i=0;i<t.treeCount;i++){var s=j.a.clone(a),n=s.children[1].geometry.clone();s.position.x=u.w.randFloat(-t.xPositionRange,t.xPositionRange),s.position.z=u.w.randFloat(-t.zPositionRange,t.zPositionRange);var r=u.w.randFloat(.5,1.25);s.scale.x=r,s.scale.y=r,s.scale.z=r,n.rotateZ(2*Math.PI*u.w.randFloat(0,1)),s.children[1].geometry=n,e.add(s),t.trees.push(s)}}))}},{key:"makeVisible",value:function(){this.material.opacity=1,this.isFadingIn=!1}},{key:"fadeIn",value:function(){this.material.opacity<.5?(this.isFadingIn=!0,this.material.opacity=.5):this.material.opacity<1?this.material.opacity+=.005:this.material.opacity>1&&(this.isFadingIn=!1,this.material.opacity=1)}},{key:"swayAnimation",value:function(){if(this.trees!==[]){var e,t=Math.PI/8192,a=Math.PI/180,i=Math.cos(this.swayAngle)*t,s=Object(l.a)(this.trees);try{for(s.s();!(e=s.n()).done;)for(var n=e.value.children[1],r=0;r<n.skeleton.bones.length;r++){n.skeleton.bones[r].rotation.z+=i}}catch(o){s.e(o)}finally{s.f()}this.swayAngle+=a}}},{key:"mouseOverAnimation",value:function(e){console.log(e)}}]),e}(),p=function(){function e(t,a,i){Object(h.a)(this,e);var s=t.load("./textures/grass/grass.jpg");s.wrapS=u.N,s.wrapT=u.N,s.repeat.set(4,4),this.material=new u.A({map:s,side:u.l,opacity:0,transparent:!0}),this.width=a,this.height=i}return Object(d.a)(e,[{key:"load",value:function(e){var t=new u.H(this.width,this.height),a=new u.z(t,this.material);a.rotation.x=Math.PI/2,e.add(a)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.01:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),v=function(){function e(t,a,i){Object(h.a)(this,e);var s=t.load("./textures/wood/wood.jpg");s.wrapS=u.N,s.wrapT=u.N,s.repeat.set(7,1),this.material=new u.A({map:s,side:u.l,opacity:0,transparent:!0}),this.width=a,this.height=i,this.relativeXPos=a/2+2.5,this.relativeZPos=i/2+2.5}return Object(d.a)(e,[{key:"load",value:function(e){var t=new u.z(new u.e(this.width,20,5),this.material);t.position.z=-this.relativeZPos,t.position.y=10,e.add(t);var a=t.clone();a.position.z=this.relativeZPos,a.position.y=10,e.add(a);var i=new u.z(new u.e(this.height+10,20,5),this.material);i.rotation.y=Math.PI/2,i.position.x=this.relativeXPos,i.position.z=0,i.position.y=10,e.add(i);var s=i.clone();s.position.x=-this.relativeXPos,e.add(s)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.01:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),g=function(){function e(t,a){Object(h.a)(this,e),this.camera=new u.G(45,window.innerWidth/window.innerHeight,.1,1e5),this.renderer=new u.ab({canvas:t,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor("rgb(40, 44, 52)"),this.scene=new u.O,this.raycaster=new u.M,this.mouse=new u.W,this.textureLoader=new u.U,this.setCamera(a),this.initModels(a),this.loadScene(),this.render()}return Object(d.a)(e,[{key:"render",value:function(){var e=this;!function t(){e.animationFrameId=requestAnimationFrame(t),e.fadeIn(),e.bamboo.swayAnimation(),e.renderer.render(e.scene,e.camera)}()}},{key:"update",value:function(e){this.setCamera(e),this.initModels(e),this.clearScene(),this.loadScene()}},{key:"setCamera",value:function(e){switch(e.camera){case"default":this.camera.position.set(0,260,450),this.camera.lookAt(0,110,0);break;case"top-down":this.camera.position.set(0,600,0),this.camera.lookAt(0,0,0);break;case"zoomed":this.camera.position.set(0,230,360),this.camera.lookAt(0,110,0)}}},{key:"initModels",value:function(e){this.bamboo=new m(this.textureLoader,e.trees,e.width,e.height),this.grass=new p(this.textureLoader,e.width,e.height),this.sideboard=new v(this.textureLoader,e.width,e.height)}},{key:"loadScene",value:function(){var e="white";this.scene.fog=new u.q(e,1,1),this.scene.background=new u.i(e),this.scene.add(new u.a(3355443,15)),this.bamboo.load(this.scene),this.bamboo.makeVisible(),this.grass.load(this.scene),this.grass.makeVisible(),this.sideboard.load(this.scene),this.sideboard.makeVisible()}},{key:"clearScene",value:function(){var e=[];this.scene.traverse((function(t){e.push(t)}));for(var t=0,a=e;t<a.length;t++){var i=a[t];this.scene.remove(i)}}},{key:"fadeIn",value:function(){this.scene.fog.far<800&&(this.scene.fog.far=this.scene.fog.far+30),this.bamboo.fadeIn(),this.grass.fadeIn(),this.sideboard.fadeIn()}},{key:"onMouseMove",value:function(e,t){this.mouse.x=parseFloat(e),this.mouse.y=parseFloat(t),this.raycaster.setFromCamera(this.mouse,this.camera);var a,i=this.raycaster.intersectObjects(this.bamboo.trees,!0),s=Object(l.a)(i);try{for(s.s();!(a=s.n()).done;){var n=a.value;this.bamboo.mouseOverAnimation(n.object.parent)}}catch(r){s.e(r)}finally{s.f()}}}]),e}(),f=a(6);var w=function(e){var t=Object(s.useRef)(null),a=Object(s.useRef)(null);return Object(s.useEffect)((function(){a.current=new g(t.current,e.settings)}),[]),Object(s.useEffect)((function(){e.updateCount>0&&a.current.update(e.settings)}),[e.updateCount]),Object(f.jsx)("div",{children:Object(f.jsx)("canvas",{ref:t,width:window.innerWidth,height:window.innerHeight,className:"canvas",children:Object(f.jsx)("p",{children:"Your browser doesn't support canvas."})})})};a(29);var O=function(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),i=a[0],n=a[1],r=Object(s.useState)("Click Here to Search"),o=Object(c.a)(r,2),l=o[0],h=o[1],d=Object(s.useRef)(null),u=Object(s.useRef)(i),b=function(e){"Enter"===e.key&&(window.location.href="https://www.google.com/search?q="+u.current)};return Object(s.useEffect)((function(){document.addEventListener("keypress",b),d.current.onclick=function(){h("")},d.current.onblur=function(){h("Click Here to Search")}}),[]),Object(f.jsx)("div",{children:Object(f.jsx)("input",{className:"search",ref:d,type:"text",spellCheck:"false",style:{top:window.innerHeight/2,width:window.innerWidth},value:i,onChange:function(e){var t;t=e.target.value,u.current=t,n(t)},onSubmit:b,placeholder:l})})};a(30);var x=function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],n=a[1],r=function(e){n(!i)};return Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"button openButton",style:{top:window.innerHeight-60,left:window.innerWidth-60},onClick:r,children:"\u270e"}),Object(f.jsxs)("div",{className:"settingsMenu",style:{width:i?"300px":"0"},children:[Object(f.jsx)("button",{className:"button closeButton",onClick:r,children:"\xd7"}),Object(f.jsx)("hr",{}),Object(f.jsx)("label",{className:"title",children:"Graphics"}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsxs)("div",{className:"variable",children:[Object(f.jsx)("span",{className:"variableName",children:"Width"}),Object(f.jsx)("span",{className:"variableInput",children:Object(f.jsx)("input",{type:"range",id:"width",min:"10",max:"1000",value:e.settings.width,onChange:e.handleSettingsChange})}),Object(f.jsx)("span",{className:"variableValue",children:e.settings.width})]}),Object(f.jsxs)("div",{className:"variable",children:[Object(f.jsx)("span",{className:"variableName",children:"Height"}),Object(f.jsx)("span",{className:"variableInput",children:Object(f.jsx)("input",{type:"range",id:"height",min:"10",max:"1000",value:e.settings.height,onChange:e.handleSettingsChange})}),Object(f.jsx)("span",{className:"variableValue",children:e.settings.height})]}),Object(f.jsxs)("div",{className:"variable",children:[Object(f.jsx)("span",{className:"variableName",children:"Trees"}),Object(f.jsx)("span",{className:"variableInput",children:Object(f.jsx)("input",{type:"range",id:"trees",min:"1",max:"1000",value:e.settings.trees,onChange:e.handleSettingsChange})}),Object(f.jsx)("span",{className:"variableValue",children:e.settings.trees})]}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsxs)("label",{className:"info",children:["More trees will result in",Object(f.jsx)("br",{}),"increased resource and",Object(f.jsx)("br",{}),"battery usage!"]}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsx)("hr",{}),Object(f.jsx)("label",{className:"title",children:"Camera"}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsxs)("div",{className:"variable",children:[Object(f.jsx)("span",{className:"variableName",children:"View"}),Object(f.jsx)("span",{className:"variableDropdown",children:Object(f.jsxs)("select",{id:"camera",value:e.settings.camera,onChange:e.handleSettingsChange,children:[Object(f.jsx)("option",{value:"default",children:"Default"}),Object(f.jsx)("option",{value:"top-down",children:"Top-Down"}),Object(f.jsx)("option",{value:"zoomed",children:"Zoomed"})]})}),Object(f.jsx)("span",{className:"variableValue"})]}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsx)("hr",{}),Object(f.jsx)("div",{className:"separator"}),Object(f.jsx)("button",{className:"save",onClick:function(t){e.handleSave(t)},children:"Save"}),Object(f.jsx)("div",{id:"credits",style:{position:"absolute",right:10,top:window.innerHeight-30},children:Object(f.jsx)("a",{href:"https://github.com/conwayjw97",children:"github.com/conwayjw97/"})})]})]})};var y=function(e){var t={width:600,height:400,trees:350,camera:"default"};void 0!==chrome.storage&&void 0===e.bamboo_new_tab_settings?chrome.storage.sync.set({bamboo_new_tab_settings:t}):void 0!==e.bamboo_new_tab_settings&&(t=e.bamboo_new_tab_settings);var a=Object(s.useState)(t),n=Object(c.a)(a,2),r=n[0],o=n[1],l=Object(s.useState)(0),h=Object(c.a)(l,2),d=h[0],u=h[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(w,{settings:r,updateCount:d}),Object(f.jsx)(O,{}),Object(f.jsx)(x,{settings:r,handleSettingsChange:function(e){switch(e.target.id){case"width":o((function(t){return Object(i.a)(Object(i.a)({},t),{},{width:parseInt(e.target.value)})}));break;case"height":o((function(t){return Object(i.a)(Object(i.a)({},t),{},{height:parseInt(e.target.value)})}));break;case"trees":o((function(t){return Object(i.a)(Object(i.a)({},t),{},{trees:parseInt(e.target.value)})}));break;case"camera":o((function(t){return Object(i.a)(Object(i.a)({},t),{},{camera:e.target.value})}))}},handleSave:function(){void 0!==chrome.storage&&chrome.storage.sync.set({bamboo_new_tab_settings:r}),u(d+1)}})]})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,32)).then((function(t){var a=t.getCLS,i=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),i(e),s(e),n(e),r(e)}))};void 0!==chrome.storage?chrome.storage.sync.get(["bamboo_new_tab_settings"],(function(e){o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(y,Object(i.a)({},e))}),document.getElementById("root"))})):o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),k()}},[[31,1,2]]]);
//# sourceMappingURL=main.7654b2ec.chunk.js.map