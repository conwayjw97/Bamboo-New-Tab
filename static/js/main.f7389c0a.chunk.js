(this.webpackJsonpforest=this.webpackJsonpforest||[]).push([[0],{23:function(e,t,i){},24:function(e,t,i){},25:function(e,t,i){},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);var a=i(7),n=i.n(a),s=i(15),o=i.n(s),r=(i(23),i(9)),c=(i(24),i(25),i(11)),h=i(1),l=i(2),u=i(0),d=i(16),f=i(18),p=i(17),m=function(){function e(t,i,a,n){Object(h.a)(this,e);this.material=new u.C({map:t.load("./textures/bamboo/diffuse.jpg"),alphaMap:t.load("./textures/bamboo/alpha.jpg"),alphaTest:.5,side:u.l,opacity:0,transparent:!0}),this.treeCount=i,this.xPositionRange=a/2,this.zPositionRange=n/2,this.swayAngle=0,this.trees=[],this.animatedTrees=[],this.isFadingIn=!1}return Object(l.a)(e,[{key:"load",value:function(e){var t=this;(new f.a).load("./models/bamboo/BambooWithBones.fbx",(function(i){i.traverse((function(e){e instanceof u.T&&(e.material=t.material)}));for(var a=0;a<t.treeCount;a++){var n=p.a.clone(i),s=n.children[1].geometry.clone();n.position.x=u.y.randFloat(-t.xPositionRange,t.xPositionRange),n.position.z=u.y.randFloat(-t.zPositionRange,t.zPositionRange);var o=u.y.randFloat(.5,1.25);n.scale.x=o,n.scale.y=o,n.scale.z=o,s.rotateZ(2*Math.PI*u.y.randFloat(0,1)),n.children[1].geometry=s,e.add(n),t.trees.push(n)}}))}},{key:"makeVisible",value:function(){this.material.opacity=1,this.isFadingIn=!1}},{key:"fadeIn",value:function(){this.material.opacity<.5?(this.isFadingIn=!0,this.material.opacity=.5):this.material.opacity<1?this.material.opacity+=.005:this.material.opacity>1&&(this.isFadingIn=!1,this.material.opacity=1)}},{key:"swayAnimation",value:function(){if(this.trees!==[]){var e,t=Math.PI/8192,i=Math.PI/360,a=Math.cos(this.swayAngle)*t,n=Object(c.a)(this.trees);try{for(n.s();!(e=n.n()).done;)for(var s=e.value.children[1],o=0;o<s.skeleton.bones.length;o++){s.skeleton.bones[o].rotation.z+=a}}catch(r){n.e(r)}finally{n.f()}this.swayAngle+=i}}},{key:"mouseOverAnimation",value:function(e){console.log(e)}}]),e}(),b=function(){function e(t,i,a){Object(h.a)(this,e);var n=t.load("./textures/grass/grass.jpg");n.wrapS=u.P,n.wrapT=u.P,n.repeat.set(4,4),this.material=new u.C({map:n,side:u.l,opacity:0,transparent:!0}),this.width=i,this.height=a}return Object(l.a)(e,[{key:"load",value:function(e){var t=new u.J(this.width,this.height),i=new u.B(t,this.material);i.rotation.x=Math.PI/2,e.add(i)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.01:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),v=function(){function e(t,i,a){Object(h.a)(this,e);var n=t.load("./textures/wood/wood.jpg");n.wrapS=u.P,n.wrapT=u.P,n.repeat.set(7,1),this.material=new u.C({map:n,side:u.l,opacity:0,transparent:!0}),this.width=i,this.height=a,this.relativeXPos=i/2+2.5,this.relativeZPos=a/2+2.5}return Object(l.a)(e,[{key:"load",value:function(e){var t=new u.B(new u.e(this.width,20,5),this.material);t.position.z=-this.relativeZPos,t.position.y=10,e.add(t);var i=t.clone();i.position.z=this.relativeZPos,i.position.y=10,e.add(i);var a=new u.B(new u.e(this.height+10,20,5),this.material);a.rotation.y=Math.PI/2,a.position.x=this.relativeXPos,a.position.z=0,a.position.y=10,e.add(a);var n=a.clone();n.position.x=-this.relativeXPos,e.add(n)}},{key:"makeVisible",value:function(){this.material.opacity=1}},{key:"fadeIn",value:function(){this.material.opacity<1?this.material.opacity+=.01:this.material.opacity>1&&(this.material.opacity=1)}}]),e}(),w=function(){function e(t,i){Object(h.a)(this,e),this.camera=new u.I(45,window.innerWidth/window.innerHeight,.1,1e5),this.camera.position.set(0,260,450),this.renderer=new u.eb({canvas:t,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor("rgb(40, 44, 52)"),this.controls=new d.a(this.camera,this.renderer.domElement),this.controls.target=new u.bb(0,110,0),this.controls.update(),this.scene=new u.Q,this.raycaster=new u.O,this.mouse=new u.ab,this.textureLoader=new u.Y,this.initModels(i),this.loadScene(),this.render()}return Object(l.a)(e,[{key:"render",value:function(){var e=this;!function t(){e.animationFrameId=requestAnimationFrame(t),e.fadeIn(),e.bamboo.swayAnimation(),e.renderer.render(e.scene,e.camera)}()}},{key:"update",value:function(e){this.clearScene(),this.initModels(e),this.loadScene()}},{key:"initModels",value:function(e){this.bamboo=new m(this.textureLoader,e.trees,e.width,e.height),this.grass=new b(this.textureLoader,e.width,e.height),this.sideboard=new v(this.textureLoader,e.width,e.height)}},{key:"loadScene",value:function(){var e="white";this.scene.fog=new u.r(e,1,900),this.scene.background=new u.i(e),this.scene.add(new u.a(3355443,15)),this.bamboo.load(this.scene),this.grass.load(this.scene),this.sideboard.load(this.scene)}},{key:"clearScene",value:function(){var e=[];this.scene.traverse((function(t){e.push(t)}));for(var t=0,i=e;t<i.length;t++){var a=i[t];this.scene.remove(a)}}},{key:"fadeIn",value:function(){this.bamboo.fadeIn(),this.grass.fadeIn(),this.sideboard.fadeIn()}},{key:"onMouseMove",value:function(e,t){this.mouse.x=parseFloat(e),this.mouse.y=parseFloat(t),this.raycaster.setFromCamera(this.mouse,this.camera);var i,a=this.raycaster.intersectObjects(this.bamboo.trees,!0),n=Object(c.a)(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;this.bamboo.mouseOverAnimation(s.object.parent)}}catch(o){n.e(o)}finally{n.f()}}}]),e}(),y=i(8);var g=function(e){var t=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){i.current=new w(t.current,e.settings)}),[]),Object(a.useEffect)((function(){e.updateCount>0&&i.current.update(e.settings)}),[e.updateCount]),Object(y.jsx)("div",{children:Object(y.jsx)("canvas",{ref:t,width:window.innerWidth,height:window.innerHeight,className:"canvas",children:Object(y.jsx)("p",{children:"Your browser doesn't support canvas."})})})};i(28);var j=function(e){var t=Object(a.useRef)(null),i=Object(a.useState)(""),n=Object(r.a)(i,2),s=n[0],o=n[1],c=Object(a.useRef)(s),h=function(e){"Enter"===e.key&&(window.location.href="https://www.google.com/search?q="+c.current)};return Object(a.useEffect)((function(){document.addEventListener("keypress",h),t.current.select()}),[]),Object(y.jsx)("div",{children:Object(y.jsx)("input",{className:"search",ref:t,type:"text",placeholder:"",style:{top:window.innerHeight/2,width:window.innerWidth},value:s,onChange:function(e){var t;t=e.target.value,c.current=t,o(t)},onSubmit:h})})};var O=function(){var e=Object(a.useState)({width:800,height:400,trees:400}),t=Object(r.a)(e,2),i=t[0],n=(t[1],Object(a.useState)(0)),s=Object(r.a)(n,2),o=s[0];return s[1],Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(g,{settings:i,updateCount:o}),Object(y.jsx)(j,{})]})},x=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,30)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;i(e),a(e),n(e),s(e),o(e)}))};o.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(O,{})}),document.getElementById("root")),x()}},[[29,1,2]]]);
//# sourceMappingURL=main.f7389c0a.chunk.js.map